<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="3DG58IOpE2YkxFvac3qpMs7QSdYHNCyxUq_VTVr7gpo"/>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @font-face{
        font-family:'DNFBitBitv2';
        font-style:normal;font-weight:200;src:url('//cdn.df.nexon.com/img/common/font/DNFBitBitv2.otf')format('opentype')
        }
        @font-face {
            font-family: 'Pretendard-Regular';
            src: url('https://fastly.jsdelivr.net/gh/Project-Noonnu/noonfonts_2107@1.1/Pretendard-Regular.woff') format('woff');
            font-weight: 200;
            font-style: normal;
        }
    </style>
    <script>
    tailwind.config = {
        theme: {
        extend: {
            fontFamily: {
                sans: ["Pretendard-Regular", "sans-serif"], 
                bitbit: ["DNFBitBitv2"]
            },
            colors: {
            clifford: '#da373d',
            }
        }
        }
    }
    </script>
    <title>ì¹´ë¼ì˜¤ì¼€ - ì˜¤íƒ€ì¿  ë…¸ë˜ë°© ë¦¬ìŠ¤íŠ¸</title>
</head>
<body>
    <div class="relative overflow-x-auto p-8 lg:px-64">

        <p class="text-2xl md:text-3xl italic font-bitbit">Karaoke (a.k.a ì˜¤íƒ€ì¿  ë…¸ë˜ë°© ë¦¬ìŠ¤íŠ¸)</p>
        <p class="text-base pb-4 font-sans">ë¬¸ì˜: luke@yclk.me</p>
        
        <div class="mb-4">
            <ul class="flex">
                <li class="mr-3">
                    <a class="inline-block border border-white rounded hover:border-gray-200 text-blue-500 hover:bg-gray-200 py-1 px-3" href="/">ì „ì²´ ë³´ê¸°</a>
                </li>
                <li class="mr-3">
                    <a class="inline-block border border-blue-500 rounded py-1 px-3 bg-blue-500 text-white" href="/add">ë“±ë¡</a>
                </li>
                <li class="mr-3">
                    <a class="inline-block border border-white rounded hover:border-gray-200 text-blue-500 hover:bg-gray-200 py-1 px-3" href="/manage">ê´€ë¦¬</a>
                </li>
            </ul>
        </div>

        <div>
            <form method="POST" action="/karaoke" class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
                
                <!-- ê³¡ ë²ˆí˜¸ ìë™ ê²€ìƒ‰ ì„¹ì…˜ -->
                <div class="mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200">
                    <label class="block text-blue-700 text-m font-bold mb-2">ğŸ” TJ ê³¡ ë²ˆí˜¸ë¡œ ìë™ ê²€ìƒ‰</label>
                    <div class="flex flex-col sm:flex-row gap-2">
                        <input 
                            id="search-number" 
                            type="text" 
                            placeholder="TJ ê³¡ ë²ˆí˜¸ ì…ë ¥ (ì˜ˆ: 27527)" 
                            class="shadow appearance-none border rounded w-full sm:flex-1 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500"
                        >
                        <button 
                            type="button" 
                            id="search-btn"
                            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors w-full sm:w-auto"
                        >
                            ê²€ìƒ‰
                        </button>
                    </div>
                    <p id="search-status" class="text-sm mt-2 text-gray-500"></p>
                </div>

                <div class="mb-4">
                    <label class="block text-gray-700 text-m font-bold mb-2" for="ì œëª©">ì œëª©</label>
                    <input id="title" type="text" name="title" placeholder="ì œëª©" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                </div>
    
                <div class="mb-4">
                    <label class="block text-gray-700 text-m font-bold mb-2" for="ì•„í‹°ìŠ¤íŠ¸">ì•„í‹°ìŠ¤íŠ¸</label>
                    <input id="artist" type="text" name="artist" placeholder="ì•„í‹°ìŠ¤íŠ¸" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                </div>
    
                <div class="mb-4">
                    <label class="block text-gray-700 text-m font-bold mb-2" for="ë²ˆí˜¸">ë²ˆí˜¸</label>
                    <input id="number" type="text" name="number" placeholder="ë²ˆí˜¸" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                </div>
                
                <div class="grid grid-cols-2 gap-5 mb-4">

                    <div>
                        <label class="block text-gray-700 text-m font-bold mb-2" for="ë…¸ë˜ë°©">ë…¸ë˜ë°©</label>
                        <div class="inline-block relative w-full">
                            <select
                            name="karaoke1" id="karaoke1" class="block appearance-none w-full bg-white border border-gray-200 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline">
                                <option>TJ</option>
                                <option>KY</option>
                            </select>
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.2" stroke="currentColor" class="h-5 w-5 ml-1 absolute top-2.5 right-2.5 text-slate-700">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9" />
                          </svg>
                        </div>
                    </div>

                    <div>
                        <label class="block text-gray-700 text-m font-bold mb-2" for="ì¢…ë¥˜">ì¢…ë¥˜</label>
                        <div class="inline-block relative w-full">
                            <select
                            name="categories" class="block appearance-none w-full bg-white border border-gray-200 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline">
                                <option>ë³´ì¹´ë¡œ</option>
                                <option>KPOP</option>
                                <option>JPOP</option>
                                <option>JROCK</option>
                            </select>
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.2" stroke="currentColor" class="h-5 w-5 ml-1 absolute top-2.5 right-2.5 text-slate-700">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9" />
                          </svg>
                        </div>
                    </div>

                </div>
    
                <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-2">
                    <input type='submit' value="ë“±ë¡í•˜ê¸°">
                </button>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('search-btn').addEventListener('click', searchSong);
        document.getElementById('search-number').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                searchSong();
            }
        });

        async function searchSong() {
            const songNumber = document.getElementById('search-number').value.trim();
            const statusEl = document.getElementById('search-status');
            const searchBtn = document.getElementById('search-btn');
            
            if (!songNumber) {
                statusEl.textContent = 'âš ï¸ ê³¡ ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                statusEl.className = 'text-sm mt-2 text-yellow-600';
                return;
            }

            // ë¡œë”© ìƒíƒœ
            searchBtn.disabled = true;
            searchBtn.textContent = 'ê²€ìƒ‰ ì¤‘...';
            statusEl.textContent = 'ğŸ”„ ê³¡ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘...';
            statusEl.className = 'text-sm mt-2 text-blue-500';

            try {
                const response = await fetch(`/api/tj-song/${songNumber}`);
                const data = await response.json();

                if (data.success && data.song) {
                    // í¼ í•„ë“œ ìë™ ì±„ìš°ê¸°
                    document.getElementById('title').value = data.song.title || '';
                    document.getElementById('artist').value = data.song.artist || '';
                    document.getElementById('number').value = data.song.number || songNumber;
                    document.getElementById('karaoke1').value = 'TJ';
                    
                    statusEl.textContent = `âœ… "${data.song.title}" - ${data.song.artist}`;
                    statusEl.className = 'text-sm mt-2 text-green-600';
                } else {
                    statusEl.textContent = 'âŒ í•´ë‹¹ ë²ˆí˜¸ì˜ ê³¡ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
                    statusEl.className = 'text-sm mt-2 text-red-500';
                }
            } catch (error) {
                console.error('Error:', error);
                statusEl.textContent = 'âŒ ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
                statusEl.className = 'text-sm mt-2 text-red-500';
            } finally {
                searchBtn.disabled = false;
                searchBtn.textContent = 'ê²€ìƒ‰';
            }
        }
    </script>
</body>
</html>

